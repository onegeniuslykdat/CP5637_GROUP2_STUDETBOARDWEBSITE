/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

tribe.tickets.commerce.gateway.free=tribe.tickets.commerce.gateway.free||{},tribe.tickets.commerce.gateway.free.checkout={},(($,obj,ky)=>{"use strict";obj.checkout=tecTicketsCommerceGatewayFreeCheckout,obj.selectors={submitButton:"#tec-tc-gateway-free-checkout-button",hiddenElement:".tribe-common-a11y-hidden"},obj.checkoutContainer=null,obj.onBeforeRetry=async error=>(console.log(error),ky.stop),obj.onBeforeError=async error=>(console.log(error),ky.stop),obj.getRequestArgs=(data,headers)=>{void 0===headers&&(headers={"X-WP-Nonce":obj.checkout.nonce});const args={headers:headers,hooks:{beforeRetry:[obj.onBeforeRetry],beforeError:[obj.onBeforeError]},timeout:3e4,throwHttpErrors:!1};return data&&(args.json=data),args},obj.hideNotice=$container=>{$container.length||($container=$(tribe.tickets.commerce.selectors.checkoutContainer));const notice=tribe.tickets.commerce.notice,$item=$container.find(notice.selectors.item);notice.hide($item)},obj.showNotice=($container,title,content)=>{$container&&$container.length||($container=$(tribe.tickets.commerce.selectors.checkoutContainer));const notice=tribe.tickets.commerce.notice,$item=$container.find(notice.selectors.item);notice.populate($item,title,content),notice.show($item)},obj.submitButton=enable=>{$(obj.selectors.submitButton).prop("disabled",!enable)},obj.handlePayment=async event=>{event.preventDefault(),obj.checkoutContainer=$(event.target).closest(tribe.tickets.commerce.selectors.checkoutContainer),obj.hideNotice(obj.checkoutContainer),tribe.tickets.loader.show(obj.checkoutContainer);let order=await obj.handleCreateOrder();obj.submitButton(!1),order.success?window.location.replace(order.redirect_url):(tribe.tickets.loader.hide(obj.checkoutContainer),obj.showNotice({},order.message,"")),obj.submitButton(!0)},obj.handleCreateOrder=async()=>{const args=obj.getRequestArgs({purchaser:obj.getPurchaserData()});let response;try{response=await tribe.ky.post(obj.checkout.orderEndpoint,args).json()}catch(error){response=error}return tribe.tickets.debug.log("free","createOrder",response),response},obj.getPurchaserData=()=>tribe.tickets.commerce.getPurchaserData($(tribe.tickets.commerce.selectors.purchaserFormContainer)),obj.bindEvents=()=>{$(obj.selectors.submitButton).on("click",obj.handlePayment)},obj.ready=()=>{obj.bindEvents()},$(obj.ready)})(jQuery,tribe.tickets.commerce.gateway.free,tribe.ky);
/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

var tribe_move_tickets=tribe_move_tickets||{};!function($,obj){var $main,$processing,$errors,$current_stage,current_stage_name,$stages,$back,$next,last_direction,skip_choose_event,target_post_id,target_ticket_type_id;function activate_stage($stage_element){current_stage_name=($current_stage=$stage_element).attr("id"),$stages.hide(),$current_stage.show(),$main.trigger("pre-activate-stage.tribe"),$main.trigger("activate-"+current_stage_name+".tribe")}function set_target_post(id){(id=parseInt(id,10))>0&&target_post_id!==id&&(target_post_id=id,$main.trigger("destination-post-selected.tribe"))}function enable_btn($btn,stage){stage===current_stage_name&&($btn.removeProp("disabled").show().removeClass("disabled"),"next"===$btn.attr("id")&&is_final_stage()&&$btn.addClass("button-primary"))}function disable_btn($btn,stage){stage===current_stage_name&&$btn.prop("disabled",!0).addClass("disabled").removeClass("button-primary")}function hide_btn($btn,stage){stage===current_stage_name&&$btn.hide()}function is_final_stage(){return!$current_stage.next(".stage").length}obj.get_main_element=function(){return $main},obj.hide_btn=hide_btn,obj.disable_btn=disable_btn,obj.enable_btn=enable_btn,obj.activate_stage=activate_stage,$((function init(){$main=$("#main"),$errors=$(".error"),$processing=$("#processing"),$back=$("#back"),$next=$("#next"),$main.trigger("move-tickets-dialog-pre-init.tribe"),$back.add($next).hide(),$processing.hide(),$errors.length||($next.show(),function setup_stages(){(function choose_event_stage(){var update_delay,$post_choices=$("#choose-event").find(".select-single-container"),$post_type=$("#post-type"),$search_terms=$("#search-terms"),this_stage="choose-event",populating=!1;function populate_post_types(){$post_type.html('<option value="">'+tribe_move_tickets_data.loading_msg+"</option>");var request={action:"move_tickets_get_post_types",check:tribe_move_tickets_data.check};$.post(ajaxurl,request,(function(response){if(void 0!==response.data&&"object"==typeof response.data.posts)for(var key in $post_type.html(""),response.data.posts)$post_type.append('<option value="'+key+'">'+response.data.posts[key]+"</option>")}))}function populate_post_choices(){if(!populating){populating=!0,$post_choices.css("opacity",.6),disable_btn($next,this_stage);var request={action:"move_tickets_get_post_choices",check:tribe_move_tickets_data.check,post_type:$post_type.val(),search_terms:$search_terms.val(),ignore:tribe_move_tickets_data.src_post_id};$.post(ajaxurl,request,(function(response){if(void 0!==response.data&&"object"==typeof response.data.posts){$post_choices.html("");var total_posts=0;for(var key in response.data.posts){var post_id=parseInt(key,10),title=response.data.posts[key];total_posts++,$post_choices.append('<label> <input type="radio" value="'+post_id+'" name="post-choice">'+title+"</label>")}total_posts||$post_choices.append("<label>"+tribe_move_tickets_data.no_posts_found+"</label>"),populating=!1,$post_choices.css("opacity",1)}}))}}function process_selection(){var $selected_input=$post_choices.find("input:checked");$post_choices.find(".selected").removeClass("selected"),$selected_input.length&&(set_target_post($selected_input.val()),$selected_input.parent("label").addClass("selected"),enable_btn($next,this_stage))}$main.on("activate-choose-event.tribe",(function(){disable_btn($next,this_stage),skip_choose_event&&"next"===last_direction?activate_stage($current_stage.next()):skip_choose_event&&activate_stage($stages.first()),process_selection()})),populate_post_types(),populate_post_choices(),$search_terms.keyup((function(){clearTimeout(update_delay),update_delay=setTimeout(populate_post_choices,200)})),$post_type.change(populate_post_choices),$post_choices.click((function(){populating||process_selection()}))})(),"move_tickets"===tribe_move_tickets_data.mode?(!function move_where_stage(){var this_stage="move-where",$selectors=$('input[name="move-where"]');function check_selection(){var $selected=$selectors.filter(":checked");$selected.length?("this-post"===$selected.val()?(set_target_post(tribe_move_tickets_data.src_post_id),skip_choose_event=!0):(target_post_id=!1,skip_choose_event=!1),enable_btn($next,this_stage)):disable_btn($next,this_stage)}$main.on("activate-move-where.tribe",(function(){hide_btn($back,this_stage),check_selection()})),$selectors.change(check_selection)}(),function choose_ticket_type_stage(){var this_stage="choose-ticket-type",$type_choices=$("#choose-ticket-type").find(".select-single-container");function process_selection(){var $selected_input=$type_choices.find("input:checked");$type_choices.find(".selected").removeClass("selected"),$selected_input.length&&(target_ticket_type_id=parseInt($selected_input.val()),$selected_input.parent("label").addClass("selected"),enable_btn($next,this_stage))}$main.on("activate-choose-ticket-type.tribe",(function(){disable_btn($next,this_stage),target_post_id||activate_stage($stages.first())})),$main.on("destination-post-selected.tribe",(function(){$type_choices.css("opacity",.6),disable_btn($next,this_stage);var request={action:"move_tickets_get_ticket_types",check:tribe_move_tickets_data.check,post_id:target_post_id,provider:tribe_move_tickets_data.provider,ticket_ids:tribe_move_tickets_data.ticket_ids};$.post(ajaxurl,request,(function(response){if("object"==typeof response.data.posts){$type_choices.html("");var types_count=0;for(var key in response.data.posts){var post_id=parseInt(key,10),title=response.data.posts[key];types_count++,$type_choices.append('<label> <input type="radio" value="'+post_id+'" name="post-choice">'+title+"</label>")}types_count||$type_choices.append("<label>"+tribe_move_tickets_data.no_ticket_types_found+"</label>"),$type_choices.css("opacity",1)}}))})),$type_choices.click(process_selection)}()):($("#move-where").remove(),$("#choose-ticket-type").remove());$stages=$(".stage"),function forward_back_handler(){var normal_text=$next.html(),final_text=$next.data("final-text");function move(direction){last_direction=direction;var $stage=$current_stage[direction](".stage");$stage.length?activate_stage($stage):is_final_stage()&&$main.trigger("move-tickets-final-stage.tribe")}final_text=final_text||normal_text,$main.on("pre-activate-stage.tribe",(function(){$next.html(is_final_stage()?final_text:normal_text)})),$back.add($next).click((function(){switch($(this).attr("id")){case"back":move("prev");break;case"next":move("next")}}))}(),function final_stage_handler(){function move_tickets(){if(target_post_id&&target_ticket_type_id){var request={action:"move_tickets",src_post_id:tribe_move_tickets_data.src_post_id,target_post_id:target_post_id,check:tribe_move_tickets_data.check,ticket_ids:tribe_move_tickets_data.ticket_ids,target_type_id:target_ticket_type_id};$stages.hide(),$back.hide(),$next.hide(),$processing.show(),$.post(ajaxurl,request,(function(data){on_response(data)})).fail(on_failure)}}function move_ticket_type(){if(target_post_id){var request={action:"move_ticket_type",src_post_id:tribe_move_tickets_data.src_post_id,ticket_type_id:tribe_move_tickets_data.ticket_type_id,target_post_id:target_post_id,check:tribe_move_tickets_data.check};$stages.hide(),$back.hide(),$next.hide(),$processing.show(),$.post(ajaxurl,request,(function(data){on_response(data)})).fail(on_failure)}}function on_response(response){if(void 0!==response.data&&"string"==typeof response.data.message){if($processing.html(response.data.message),"string"==typeof response.data.redirect_top){var delay="number"==typeof response.data.redirect_top_delay?response.data.redirect_top_delay:2e3;setTimeout((function(){top.location=response.data.redirect_top}),delay)}"number"==typeof response.data.remove_ticket_type&&top.jQuery("table.ticket_list").find('tr[data-ticket-type-id="'+response.data.remove_ticket_type+'"]').remove(),top.jQuery("#ticket_form_cancel").trigger("click"),$.isArray(response.data.remove_tickets)&&top.tribe_event_tickets_attendees.remove_tickets(response.data.remove_tickets)}else on_failure()}function on_failure(){$processing.html(tribe_move_tickets_data.unexpected_failure)}$main.on("move-tickets-final-stage.tribe",(function(){switch(tribe_move_tickets_data.mode){case"move_tickets":move_tickets();break;case"ticket_type_only":move_ticket_type()}}))}(),activate_stage($stages.first())}()),$main.trigger("move-tickets-dialog-post-init.tribe")}))}(jQuery,tribe_move_tickets);